version: "1.0"
model: "us.anthropic.claude-3-haiku-20240307-v1:0"

# system_prompt는 부모 에이전트(user_skill_profiler)의 것을 상속받아 사용
# 필요시 여기에 오버라이드 가능

user_template: |
  다음 코드를 분석하여 관련 스킬을 매칭하세요:

  **코드:**
  ```python
  {code}
  ```

  **파일 경로:** {file_path}
  **라인 범위:** {line_start}-{line_end}

  **후보 스킬 (임베딩 검색 결과):**
  {candidate_skills}

  **관련성 임계값:** {relevance_threshold}

  **⚠️ 중요: 응답 형식**
  - `matched_skills`와 `missing_skills`는 반드시 객체 배열(리스트)이어야 합니다.
  - JSON 문자열이 아닌 실제 배열을 반환해야 합니다.
  - 예: `matched_skills: [...]` (올바름) ❌ `matched_skills: "[...]"` (잘못됨)

  **스킬 매칭:**
  - relevance_score >= {relevance_threshold}인 스킬만 matched_skills에 포함하세요.
  - 실제로 코드에서 사용되는 스킬만 매칭하세요.

  **⚠️ 미등록 스킬 제안 기준 (매우 엄격):**
  다음 조건을 모두 만족하는 경우에만 missing_skills에 제안하세요:
  1. 코드에서 명확하게 특정 라이브러리/프레임워크/기술을 사용하고 있음
  2. 해당 기술이 스킬 DB에 전혀 없음 (후보 스킬에도 없음)
  3. 기술적으로 의미 있는 스킬임 (단순 함수 호출이 아님)
  4. 특정 도메인/기술 영역의 전문 지식을 요구함

  **❌ 제안하지 말 것:**
  - 기본 Python 문법 (if, for, def, class, import, if __name__ == '__main__' 등)
  - 표준 라이브러리 기본 사용 (os.path.exists, sys.argv, pathlib.Path, json.load 등)
  - 너무 일반적인 이름 ("이미지 처리", "데이터 처리", "파일 처리" 등)
  - 이미 기존 스킬로 커버 가능한 것 (예: OpenCV 사용 → "컴퓨터 비전" 카테고리)
  - 코드에 실제로 없는 기능
  - 단순 함수/클래스 정의만 있는 경우

  **✅ 제안해야 할 것:**
  - 특정 프레임워크/라이브러리 (예: YOLOv8, FastAPI, Django 등)
  - 특정 기술 패턴 (예: Event Sourcing, CQRS 등)
  - 도메인 특화 기술

  **중요:** 대부분의 경우 missing_skills는 빈 배열 []이어야 합니다.

